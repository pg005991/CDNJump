<div align="center">
  <img src="images/cdnjump-logo 05.png" alt="CDNJump Logo" width="400"/>
  
  # CDN-Jump üîç
  
  [![Python](https://img.shields.io/badge/Python-3.9+-blue.svg)](https://www.python.org/downloads/)
  [![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
  [![Poetry](https://img.shields.io/badge/Poetry-1.4+-orange.svg)](https://python-poetry.org/)
  
  **CDN-Jump** es una herramienta avanzada de an√°lisis de seguridad dise√±ada para **detectar posibles bypasses** en servicios de Content Delivery Network (CDN). Combina consultas en tiempo real con an√°lisis hist√≥ricos para proporcionar una visi√≥n completa de la infraestructura de dominios.
</div>

## üéØ ¬øQu√© hace CDN-Jump?

CDN-Jump analiza dominios para identificar cuando un atacante puede acceder directamente al servidor de origen, evitando las protecciones de la CDN. Esto es crucial para:

- **üîí Auditor√≠as de seguridad** - Detectar infraestructura expuesta
- **üõ°Ô∏è Evaluaci√≥n de vulnerabilidades** - Identificar bypasses de CDN
- **üìä An√°lisis de amenazas** - Monitorear cambios en infraestructura
- **‚ö° Validaci√≥n de configuraciones** - Verificar efectividad de protecciones

## ‚ú® Caracter√≠sticas Principales

### üîç An√°lisis Integral

- **Consultas DNS** en tiempo real
- **Historial de resoluciones** via VirusTotal API
- **B√∫squeda de certificados** via Censys API
- **Validaci√≥n de contenido** HTTP/HTTPS
- **Detecci√≥n autom√°tica** de CDNs
- **üìù Sistema de logging avanzado** con archivos separados por dominio

### üéõÔ∏è M√∫ltiples Modos de Operaci√≥n

- **Modo B√°sico**: Escaneo est√°ndar con consultas DNS
- **Modo Intensivo**: An√°lisis profundo con AS owner y paginaci√≥n
- **Modo Censys**: B√∫squeda avanzada en certificados SSL
- **Modo Todo**: Combinaci√≥n de todas las t√©cnicas

### üõ†Ô∏è Detecci√≥n de CDNs

Utiliza **tres t√©cnicas** para identificar CDNs:

- **PTR Lookup**: Consulta inversa DNS
- **WHOIS**: An√°lisis de informaci√≥n de registro
- **Cabeceras HTTP**: Patrones en headers de respuesta

### üìä CDNs Soportados

- Akamai, Cloudflare, CloudFront
- Fastly, Imperva, KeyCDN
- StackPath, CDN77, BunnyCDN

### üìù Sistema de Logging Avanzado

- **Archivos separados por dominio** con timestamp √∫nico
- **Formato estructurado** con secciones organizadas
- **Informaci√≥n detallada** de cada etapa del an√°lisis
- **Resumen estad√≠stico** final con m√©tricas
- **Compatibilidad** con an√°lisis individual y m√∫ltiples dominios

## üöÄ Instalaci√≥n

### Prerrequisitos

- Python 3.9 o superior
- Poetry (recomendado) o pip

### Instalaci√≥n con Poetry (Recomendado)

```bash
# Clonar el repositorio
git clone https://github.com/tu-usuario/CDNJump.git
cd CDNJump

# Instalar dependencias
poetry install

# Activar el entorno virtual
poetry shell
```

### Instalaci√≥n con pip

```bash
# Clonar el repositorio
git clone https://github.com/tu-usuario/CDNJump.git
cd CDNJump

# Instalar dependencias
pip install -r requirements.txt
```

## ‚öôÔ∏è Configuraci√≥n

### 1. Variables de Entorno

El proyecto incluye un archivo `.env-example` como plantilla. Para configurar tu entorno:

```bash
# Copiar la plantilla
cp .env-example .env

# Editar con tus claves de API
nano .env
```

**Contenido del archivo `.env`:**

```bash
# VirusTotal API (obt√©n tu clave en https://www.virustotal.com/gui/join-us)
VT_API_KEY=tu_virustotal_api_key_aqui

# Censys API (obt√©n tus credenciales en https://censys.io/register)
CENSYS_API_ID=tu_censys_api_id_aqui
CENSYS_API_SECRET=tu_censys_api_secret_aqui
CENSYS_URL_API=https://search.censys.io
```

**‚ö†Ô∏è Importante:** Nunca subas el archivo `.env` real a GitHub. El `.env-example` s√≠ se puede subir (no contiene claves reales).

### 2. Configuraci√≥n YAML (Opcional)

Edita `config/settings.yaml` para personalizar:

```yaml
virustotal:
  api_key: "TU_VIRUSTOTAL_API_KEY"

censys:
  api_id: "TU_CENSYS_API_ID"
  api_secret: "TU_CENSYS_API_SECRET"
  domain_api: "api.censys.io"
  url_api: "https://censys.io"

cdns:
  - akamai
  - cloudfront
  - cloudflare
  - fastly
  - imperva
```

## üìñ Uso

### Uso B√°sico

```bash
# Analizar un dominio √∫nico
poetry run python -m cdnjump.cli -d ejemplo.com

# Modo interactivo
poetry run python -m cdnjump.cli --interactive

# Analizar m√∫ltiples dominios desde archivo
poetry run python -m cdnjump.cli -f dominios.txt

# Modo verbose para m√°s detalles
poetry run python -m cdnjump.cli -d ejemplo.com -v
```

### üìù Sistema de Logging

Cada an√°lisis genera un archivo de log independiente en la carpeta `results/`:

```bash
# Estructura de archivos generados
results/
‚îú‚îÄ‚îÄ ejemplo.com_20250724_143021.log
‚îú‚îÄ‚îÄ google.com_20250724_143025.log
‚îî‚îÄ‚îÄ github.com_20250724_143030.log
```

**Formato del archivo de log:**
```log
[2025-07-24 14:30:21] cdnjump.ejemplo.com - INFO: 
============================================================
           CDN-Jump: Escaneo de ejemplo.com
============================================================
Fecha de inicio: 2025-07-24 14:30:21
Archivo de log: /path/to/results/ejemplo.com_20250724_143021.log
============================================================

[2025-07-24 14:30:21] cdnjump.ejemplo.com - INFO: üì° REGISTROS DNS OBTENIDOS:
[2025-07-24 14:30:21] cdnjump.ejemplo.com - INFO:    Dominio: ejemplo.com
[2025-07-24 14:30:21] cdnjump.ejemplo.com - INFO:    Registros A: ['192.168.1.1', '192.168.1.2']
[2025-07-24 14:30:21] cdnjump.ejemplo.com - INFO:    Total de IPs: 2
[2025-07-24 14:30:21] cdnjump.ejemplo.com - INFO: ----------------------------------------

[2025-07-24 14:30:22] cdnjump.ejemplo.com - INFO: üîç RESULTADOS VIRUSTOTAL:
[2025-07-24 14:30:22] cdnjump.ejemplo.com - INFO:    Modo: B√°sico
[2025-07-24 14:30:22] cdnjump.ejemplo.com - INFO:    IPs hist√≥ricas: ['192.168.1.1', '192.168.1.2', '10.0.0.1']
[2025-07-24 14:30:22] cdnjump.ejemplo.com - INFO:    Total de IPs: 3
[2025-07-24 14:30:22] cdnjump.ejemplo.com - INFO: ----------------------------------------

[2025-07-24 14:30:23] cdnjump.ejemplo.com - INFO: üîÑ RESULTADOS COMBINADOS:
[2025-07-24 14:30:23] cdnjump.ejemplo.com - INFO:    IPs √∫nicas a validar: ['10.0.0.1', '192.168.1.1', '192.168.1.2']
[2025-07-24 14:30:23] cdnjump.ejemplo.com - INFO:    Total de IPs: 3
[2025-07-24 14:30:23] cdnjump.ejemplo.com - INFO: ----------------------------------------

[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO: üõ°Ô∏è RESULTADOS DETECCI√ìN CDN:
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO:    üîÑ 192.168.1.1: cloudflare
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO:    üîÑ 192.168.1.2: cloudflare
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO:    ‚úÖ 10.0.0.1: Potential CDN bypass
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO: ----------------------------------------

[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO: üìä RESUMEN DEL AN√ÅLISIS:
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO:    Dominio analizado: ejemplo.com
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO:    Total de IPs analizadas: 3
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO:    IPs con CDN detectado: 2
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO:    IPs potencial bypass: 1
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO:    Archivo de resultados: /path/to/results/ejemplo.com_20250724_143021.log
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO:    Fecha de finalizaci√≥n: 2025-07-24 14:30:24
[2025-07-24 14:30:24] cdnjump.ejemplo.com - INFO: ============================================================
```

### Modos de Escaneo

```bash
# Modo b√°sico (por defecto)
poetry run python -m cdnjump.cli -d ejemplo.com

# Modo intensivo (incluye AS owner)
poetry run python -m cdnjump.cli -d ejemplo.com --intensive

# Modo Censys (b√∫squeda en certificados)
poetry run python -m cdnjump.cli -d ejemplo.com --censys

# Modo completo (intensivo + Censys)
poetry run python -m cdnjump.cli -d ejemplo.com --intensive --censys
```

### Ejemplos de Uso

```bash
# An√°lisis b√°sico de un dominio
poetry run python -m cdnjump.cli -d google.com

# An√°lisis intensivo con verbose
poetry run python -m cdnjump.cli -d github.com --intensive -v

# Procesar lista de dominios
echo "google.com\ngithub.com\nstackoverflow.com" > dominios.txt
poetry run python -m cdnjump.cli -f dominios.txt --censys

# Modo interactivo para explorar opciones
poetry run python -m cdnjump.cli --interactive
```

### üìÅ Gesti√≥n de Resultados

Los archivos de log se almacenan autom√°ticamente en la carpeta `results/`:

```bash
# Ver archivos de log generados
ls -la results/

# Ver contenido de un log espec√≠fico
cat results/ejemplo.com_20250724_143021.log

# Buscar logs por dominio
find results/ -name "*google.com*" -type f

# Ver logs recientes
ls -lt results/ | head -10
```

## üìä Interpretaci√≥n de Resultados

### Salida T√≠pica

```
[14:30:15] INFO: üìÅ Directorio de resultados: /path/to/results
[14:30:15] INFO: 
============================================================
           CDN-Jump: Escaneo de ejemplo.com
============================================================
Fecha de inicio: 2025-07-24 14:30:15
Archivo de log: /path/to/results/ejemplo.com_20250724_143015.log
============================================================

[14:30:15] INFO: üì° REGISTROS DNS OBTENIDOS:
[14:30:15] INFO:    Dominio: ejemplo.com
[14:30:15] INFO:    Registros A: ['192.168.1.1', '192.168.1.2']
[14:30:15] INFO:    Total de IPs: 2
[14:30:15] INFO: ----------------------------------------

[14:30:16] INFO: üîç RESULTADOS VIRUSTOTAL:
[14:30:16] INFO:    Modo: B√°sico
[14:30:16] INFO:    IPs hist√≥ricas: ['192.168.1.1', '192.168.1.2', '10.0.0.1']
[14:30:16] INFO:    Total de IPs: 3
[14:30:16] INFO: ----------------------------------------

[14:30:17] INFO: üîÑ RESULTADOS COMBINADOS:
[14:30:17] INFO:    IPs √∫nicas a validar: ['10.0.0.1', '192.168.1.1', '192.168.1.2']
[14:30:17] INFO:    Total de IPs: 3
[14:30:17] INFO: ----------------------------------------

[14:30:18] INFO: üõ°Ô∏è RESULTADOS DETECCI√ìN CDN:
[14:30:18] INFO:    üîÑ 192.168.1.1: cloudflare
[14:30:18] INFO:    üîÑ 192.168.1.2: cloudflare
[14:30:18] INFO:    ‚úÖ 10.0.0.1: Potential CDN bypass
[14:30:18] INFO: ----------------------------------------

[14:30:19] INFO: üìä RESUMEN DEL AN√ÅLISIS:
[14:30:19] INFO:    Dominio analizado: ejemplo.com
[14:30:19] INFO:    Total de IPs analizadas: 3
[14:30:19] INFO:    IPs con CDN detectado: 2
[14:30:19] INFO:    IPs potencial bypass: 1
[14:30:19] INFO:    Archivo de resultados: /path/to/results/ejemplo.com_20250724_143015.log
[14:30:19] INFO:    Fecha de finalizaci√≥n: 2025-07-24 14:30:19
[14:30:19] INFO: ============================================================
[14:30:19] INFO: ‚úÖ An√°lisis completado para ejemplo.com
[14:30:19] INFO: üìÑ Log guardado en: /path/to/results/ejemplo.com_20250724_143015.log
```

### Interpretaci√≥n

- **üîÑ `cloudflare`**: IP pertenece a Cloudflare CDN ‚úÖ
- **üîÑ `akamai`**: IP pertenece a Akamai CDN ‚úÖ
- **‚úÖ `Potential CDN bypass`**: ‚ö†Ô∏è **Posible bypass** - IP no identificada como CDN

### üìà M√©tricas del Resumen

- **Total de IPs analizadas**: N√∫mero total de IPs procesadas
- **IPs con CDN detectado**: IPs identificadas como pertenecientes a CDNs
- **IPs potencial bypass**: IPs que podr√≠an permitir bypass de CDN
- **Archivo de resultados**: Ruta del archivo de log generado

## üèóÔ∏è Estructura del Proyecto

```
CDNJump/
‚îú‚îÄ‚îÄ cdnjump/                    # C√≥digo fuente principal
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py                 # Orquestador principal
‚îÇ   ‚îú‚îÄ‚îÄ cli.py                  # Interfaz de l√≠nea de comandos
‚îÇ   ‚îú‚îÄ‚îÄ dns_records.py          # Consultas DNS
‚îÇ   ‚îú‚îÄ‚îÄ api/                    # APIs externas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ virustotal.py       # VirusTotal API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ censys.py           # Censys API
‚îÇ   ‚îú‚îÄ‚îÄ validation.py           # Validaci√≥n de contenido
‚îÇ   ‚îú‚îÄ‚îÄ cdn.py                  # Detecci√≥n de CDNs
‚îÇ   ‚îî‚îÄ‚îÄ logger.py               # Sistema de logging avanzado
‚îú‚îÄ‚îÄ config/                     # Configuraci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ settings.yaml
‚îú‚îÄ‚îÄ tests/                      # Tests unitarios
‚îÇ   ‚îú‚îÄ‚îÄ test_api.py
‚îÇ   ‚îú‚îÄ‚îÄ test_dns.py
‚îÇ   ‚îú‚îÄ‚îÄ test_validation.py
‚îÇ   ‚îî‚îÄ‚îÄ test_cdn.py
‚îú‚îÄ‚îÄ results/                    # Resultados de an√°lisis (archivos de log)
‚îú‚îÄ‚îÄ scans/                      # Escaneos por dominio
‚îú‚îÄ‚îÄ pyproject.toml              # Configuraci√≥n Poetry
‚îî‚îÄ‚îÄ README.md                   # Este archivo
```

## üß™ Testing

```bash
# Ejecutar todos los tests
poetry run pytest

# Tests con cobertura
poetry run pytest --cov=cdnjump

# Tests espec√≠ficos
poetry run pytest tests/test_api.py
poetry run pytest tests/test_cdn.py
```

## üîß Desarrollo

### Configuraci√≥n del Entorno de Desarrollo

```bash
# Clonar y configurar
git clone https://github.com/tu-usuario/CDNJump.git
cd CDNJump

# Instalar dependencias de desarrollo
poetry install

# Instalar pre-commit hooks
poetry run pre-commit install

# Activar entorno virtual
poetry shell
```

### Deployment Automatizado

El proyecto incluye un script de deployment automatizado:

```bash
# Ejecutar deployment automatizado
./deploy.sh
```

**El script realizar√°:**
- ‚úÖ Verificaci√≥n de prerrequisitos
- ‚úÖ Validaci√≥n de archivos cr√≠ticos
- ‚úÖ Protecci√≥n de archivos sensibles
- ‚úÖ Limpieza de archivos temporales
- ‚úÖ Configuraci√≥n de Git
- ‚úÖ Commit inicial profesional
- ‚úÖ Conexi√≥n con GitHub
- ‚úÖ Subida del proyecto
- ‚úÖ Creaci√≥n de tag inicial

**Ver [DEPLOYMENT.md](DEPLOYMENT.md) para instrucciones detalladas.**

### Estructura de Tests

```bash
tests/
‚îú‚îÄ‚îÄ test_api.py          # Tests para APIs externas
‚îú‚îÄ‚îÄ test_dns.py          # Tests para consultas DNS
‚îú‚îÄ‚îÄ test_validation.py   # Tests para validaci√≥n
‚îî‚îÄ‚îÄ test_cdn.py          # Tests para detecci√≥n CDN
```

## üìà Roadmap

### Pr√≥ximas Caracter√≠sticas

- [x] ‚úÖ Sistema de logging avanzado con archivos separados por dominio
- [ ] Dashboard web para resultados
- [ ] Alertas autom√°ticas por email
- [ ] Integraci√≥n con m√°s APIs de seguridad
- [ ] An√°lisis de tendencias temporales
- [ ] Soporte para m√°s proveedores de CDN
- [ ] Exportaci√≥n a formatos JSON/CSV
- [ ] Compresi√≥n y rotaci√≥n autom√°tica de logs

### Mejoras T√©cnicas

- [ ] Implementaci√≥n completa de `config.py`
- [ ] Implementaci√≥n completa de `utils.py`
- [ ] Mejora en gesti√≥n de errores
- [ ] Optimizaci√≥n de rendimiento
- [ ] Documentaci√≥n de API
- [ ] Rate limiting para APIs externas

## ü§ù Contribuir

1. **Fork** el proyecto
2. Crea una **rama** para tu feature (`git checkout -b feature/AmazingFeature`)
3. **Commit** tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. **Push** a la rama (`git push origin feature/AmazingFeature`)
5. Abre un **Pull Request**

### Gu√≠as de Contribuci√≥n

- Sigue las convenciones de c√≥digo Python (PEP 8)
- A√±ade tests para nuevas funcionalidades
- Actualiza la documentaci√≥n seg√∫n sea necesario
- Verifica que todos los tests pasen antes de hacer PR

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT - ver el archivo [LICENSE](LICENSE) para detalles.

## üôè Agradecimientos

- **VirusTotal** por proporcionar acceso a su API
- **Censys** por su API de b√∫squeda de certificados
- **dnspython** por la librer√≠a de consultas DNS
- **BeautifulSoup** por el parsing de HTML

## üìû Soporte

- **Email**: <goalnefesh@protonmail.com>

---

**‚ö†Ô∏è Aviso Legal**: Esta herramienta est√° dise√±ada √∫nicamente para auditor√≠as de seguridad autorizadas. Aseg√∫rate de tener permiso antes de analizar cualquier dominio que no sea tuyo.

**üîí Seguridad**: Nunca compartas tus claves de API en c√≥digo p√∫blico. Usa siempre variables de entorno para credenciales sensibles.
